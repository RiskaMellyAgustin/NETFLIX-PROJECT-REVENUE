{% load humanize %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Invoice</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white py-12 px-6">
  <div class="max-w-2xl mx-auto bg-gray-900 p-8 rounded-lg">
    <h1 class="text-3xl font-bold text-pink-500 mb-6">Invoice</h1>
    <p><strong>Order ID:</strong> {{ subscription.order_id }}</p>
    <p><strong>Plan:</strong> {{ subscription.plan.name }}</p>
    <p><strong>Price:</strong> IDR {{ subscription.total_price|floatformat:2|intcomma }}</p>
    <p><strong>Payment Method:</strong> {{ subscription.get_payment_method_display }}</p>
    <p><strong>Status:</strong> 
      {% if subscription.status == "paid" %}
        <span class="text-green-400 font-semibold">{{ subscription.status }}</span>
      {% else %}
        <span class="text-yellow-400 font-semibold">{{ subscription.status }}</span>
      {% endif %}
    </p>
    <p><strong>Created at:</strong> {{ subscription.created_at|date:"d M Y H:i" }}</p>

    {% if subscription.status != "paid" %}
    <form action="{% url 'mark_as_paid' subscription.id %}" method="post" class="mt-6">
      {% csrf_token %}
      <button type="submit" class="bg-pink-500 px-4 py-2 rounded hover:bg-pink-600">Paid</button>
    </form>
    {% else %}
      <p class="mt-6 text-green-400 font-semibold">Payment has been confirmed</p>
    {% endif %}
  </div>
</body>
</html>
